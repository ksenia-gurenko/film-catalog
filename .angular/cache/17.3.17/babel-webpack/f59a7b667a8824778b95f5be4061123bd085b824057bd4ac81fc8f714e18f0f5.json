{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil, switchMap, finalize } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../services/movie.service\";\nimport * as i4 from \"../movie-card/movie-card.component\";\nfunction MovieDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"div\", 5);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0435\\u043C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u0444\\u0438\\u043B\\u044C\\u043C\\u0435...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction MovieDetailComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"h2\");\n    i0.ɵɵtext(3, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function MovieDetailComponent_div_2_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵtext(8, \" \\u041D\\u0430\\u0437\\u0430\\u0434 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function MovieDetailComponent_div_2_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.loadMovie());\n    });\n    i0.ɵɵtext(10, \" \\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043D\\u043E\\u0432\\u0430 \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction MovieDetailComponent_div_3_span_18__svg_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 37);\n    i0.ɵɵelement(1, \"path\", 38);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailComponent_div_3_span_18__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 37);\n    i0.ɵɵelement(1, \"path\", 39);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailComponent_div_3_span_18__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 37);\n    i0.ɵɵelement(1, \"path\", 40);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MovieDetailComponent_div_3_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 35);\n    i0.ɵɵtemplate(1, MovieDetailComponent_div_3_span_18__svg_svg_1_Template, 2, 0, \"svg\", 36)(2, MovieDetailComponent_div_3_span_18__svg_svg_2_Template, 2, 0, \"svg\", 36)(3, MovieDetailComponent_div_3_span_18__svg_svg_3_Template, 2, 0, \"svg\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", star_r4 === 1);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", star_r4 === 0.5);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", star_r4 === 0);\n  }\n}\nfunction MovieDetailComponent_div_3_span_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const genre_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", genre_r5, \" \");\n  }\n}\nfunction MovieDetailComponent_div_3_footer_51_app_movie_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-movie-card\", 46);\n    i0.ɵɵlistener(\"cardClick\", function MovieDetailComponent_div_3_footer_51_app_movie_card_4_Template_app_movie_card_cardClick_0_listener() {\n      const recommendedMovie_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.onRecommendedMovieClick(recommendedMovie_r7.id));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const recommendedMovie_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"movie\", recommendedMovie_r7)(\"showDetails\", false);\n  }\n}\nfunction MovieDetailComponent_div_3_footer_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"footer\", 42)(1, \"h2\", 43);\n    i0.ɵɵtext(2, \"\\u0420\\u0435\\u043A\\u043E\\u043C\\u0435\\u043D\\u0434\\u0443\\u0435\\u043C \\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 44);\n    i0.ɵɵtemplate(4, MovieDetailComponent_div_3_footer_51_app_movie_card_4_Template, 1, 2, \"app-movie-card\", 45);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.recommendedMovies);\n  }\n}\nfunction MovieDetailComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"header\", 12)(2, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function MovieDetailComponent_div_3_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 13);\n    i0.ɵɵelement(4, \"path\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" \\u041D\\u0430\\u0437\\u0430\\u0434 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"h1\", 15);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 16);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"main\", 17)(11, \"div\", 18)(12, \"div\", 19);\n    i0.ɵɵelement(13, \"img\", 20);\n    i0.ɵɵelementStart(14, \"div\", 21)(15, \"span\", 22);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 23);\n    i0.ɵɵtemplate(18, MovieDetailComponent_div_3_span_18_Template, 4, 3, \"span\", 24);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(19, \"div\", 25)(20, \"div\", 26)(21, \"div\", 27)(22, \"h3\", 28);\n    i0.ɵɵtext(23, \"\\u0413\\u043E\\u0434 \\u0432\\u044B\\u043F\\u0443\\u0441\\u043A\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\", 29);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 27)(27, \"h3\", 28);\n    i0.ɵɵtext(28, \"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"p\", 29);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"div\", 27)(32, \"h3\", 28);\n    i0.ɵɵtext(33, \"\\u0420\\u0435\\u0436\\u0438\\u0441\\u0441\\u0435\\u0440\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"p\", 29);\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"div\", 27)(37, \"h3\", 28);\n    i0.ɵɵtext(38, \"\\u0416\\u0430\\u043D\\u0440\\u044B\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 30);\n    i0.ɵɵtemplate(40, MovieDetailComponent_div_3_span_40_Template, 2, 1, \"span\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"div\", 32)(42, \"h3\", 28);\n    i0.ɵɵtext(43, \"\\u0412 \\u0433\\u043B\\u0430\\u0432\\u043D\\u044B\\u0445 \\u0440\\u043E\\u043B\\u044F\\u0445\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"p\", 29);\n    i0.ɵɵtext(45);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 32)(47, \"h3\", 28);\n    i0.ɵɵtext(48, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"p\", 33);\n    i0.ɵɵtext(50);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵtemplate(51, MovieDetailComponent_div_3_footer_51_Template, 5, 1, \"footer\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.originalTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r1.movie.poster, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r1.movie.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.ratingFormatted);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getRatingStars());\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.year);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.durationFormatted);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.director);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.movie.genres);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.castFormatted);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.movie.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.recommendedMovies.length > 0);\n  }\n}\nexport class MovieDetailComponent {\n  route;\n  router;\n  location;\n  movieService;\n  movie = null;\n  isLoading = true;\n  error = null;\n  recommendedMovies = [];\n  destroy$ = new Subject();\n  constructor(route, router, location, movieService) {\n    this.route = route;\n    this.router = router;\n    this.location = location;\n    this.movieService = movieService;\n  }\n  ngOnInit() {\n    this.loadMovie();\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  loadMovie() {\n    this.route.params.pipe(switchMap(params => {\n      const id = +params['id'];\n      this.isLoading = true;\n      this.error = null;\n      return this.movieService.getMovieById(id).pipe(finalize(() => {\n        this.isLoading = false;\n      }));\n    }), takeUntil(this.destroy$)).subscribe({\n      next: movie => {\n        this.movie = movie;\n        this.loadRecommendedMovies();\n      },\n      error: error => {\n        this.error = error.message || 'Не удалось загрузить информацию о фильме';\n        console.error('Error loading movie:', error);\n      }\n    });\n  }\n  loadRecommendedMovies() {\n    this.movieService.getRecommendedMovies(4).pipe(takeUntil(this.destroy$)).subscribe({\n      next: movies => {\n        this.recommendedMovies = movies.filter(m => m.id !== this.movie?.id).slice(0, 3);\n      },\n      error: error => {\n        console.error('Error loading recommended movies:', error);\n      }\n    });\n  }\n  goBack() {\n    this.location.back();\n  }\n  onRecommendedMovieClick(movieId) {\n    this.router.navigate(['/movie', movieId]);\n  }\n  getRatingStars() {\n    if (!this.movie) return [];\n    const fullStars = Math.floor(this.movie.rating / 2);\n    return Array(5).fill(0).map((_, i) => i < fullStars ? 1 : 0.5);\n  }\n  static ɵfac = function MovieDetailComponent_Factory(t) {\n    return new (t || MovieDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.Location), i0.ɵɵdirectiveInject(i3.MovieService));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MovieDetailComponent,\n    selectors: [[\"app-movie-detail\"]],\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"movie-detail\"], [\"class\", \"movie-detail__loading\", 4, \"ngIf\"], [\"class\", \"movie-detail__error\", 4, \"ngIf\"], [\"class\", \"movie-detail__content\", 4, \"ngIf\"], [1, \"movie-detail__loading\"], [1, \"loading-spinner\"], [1, \"movie-detail__error\"], [1, \"error-message\"], [1, \"error-actions\"], [\"aria-label\", \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430\\u0437\\u0430\\u0434\", 1, \"back-button\", 3, \"click\"], [\"aria-label\", \"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043D\\u043E\\u0432\\u0430\", 1, \"retry-button\", 3, \"click\"], [1, \"movie-detail__content\"], [1, \"movie-detail__header\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"aria-hidden\", \"true\"], [\"d\", \"M19 12H5M12 19l-7-7 7-7\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [1, \"movie-detail__title\", \"animate-item\"], [1, \"movie-detail__original-title\", \"animate-item\"], [1, \"movie-detail__main\"], [1, \"movie-detail__poster-section\", \"animate-item\"], [1, \"poster-container\"], [\"loading\", \"lazy\", 1, \"movie-poster\", 3, \"src\", \"alt\"], [1, \"rating-badge\"], [1, \"rating-value\"], [1, \"rating-stars\"], [\"class\", \"star\", 4, \"ngFor\", \"ngForOf\"], [1, \"movie-detail__info-section\"], [1, \"info-grid\"], [1, \"info-item\", \"animate-item\"], [1, \"info-label\"], [1, \"info-value\"], [1, \"genres-list\"], [\"class\", \"genre-tag\", 4, \"ngFor\", \"ngForOf\"], [1, \"info-item\", \"full-width\", \"animate-item\"], [1, \"description\"], [\"class\", \"movie-detail__recommendations animate-item\", 4, \"ngIf\"], [1, \"star\"], [\"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"currentColor\", 4, \"ngIf\"], [\"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"currentColor\"], [\"d\", \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"], [\"d\", \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77V2z\"], [\"d\", \"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\", \"fill-opacity\", \"0.3\"], [1, \"genre-tag\"], [1, \"movie-detail__recommendations\", \"animate-item\"], [1, \"recommendations-title\"], [1, \"recommendations-grid\"], [\"class\", \"recommendation-card\", 3, \"movie\", \"showDetails\", \"cardClick\", 4, \"ngFor\", \"ngForOf\"], [1, \"recommendation-card\", 3, \"cardClick\", \"movie\", \"showDetails\"]],\n    template: function MovieDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, MovieDetailComponent_div_1_Template, 4, 0, \"div\", 1)(2, MovieDetailComponent_div_2_Template, 11, 1, \"div\", 2)(3, MovieDetailComponent_div_3_Template, 52, 13, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.error && !ctx.isLoading);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.movie && !ctx.isLoading && !ctx.error);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i4.MovieCardComponent],\n    styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n\\n \\tvar __webpack_modules__ = ({\\n\\n\\n 245:\\n\\n\\n\\n\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/sass-loader/dist/cjs.js):\\\\nUndefined variable.\\\\n   \\u2577\\\\n60 \\u2502   box-shadow: $shadow-md;\\\\r\\\\n   \\u2502               ^^^^^^^^^^\\\\n   \\u2575\\\\n  src\\\\\\\\styles\\\\\\\\_mixins.scss 60:15                                     card-shadow()\\\\n  src\\\\\\\\app\\\\\\\\components\\\\\\\\movie-detail\\\\\\\\movie-detail.component.scss 31:7  root stylesheet\\\");\\n\\n\\n })\\n\\n\\n \\t});\\n\\n\\n\\n \\t\\n\\n \\t// startup\\n\\n \\t// Load entry module and return exports\\n\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n\\n \\tvar __webpack_exports__ = {};\\n\\n \\t__webpack_modules__[245]();\\n\\n \\tresource = __webpack_exports__;\\n\\n \\t\\n\\n })()\\n;\"]\n  });\n}","map":{"version":3,"names":["Subject","takeUntil","switchMap","finalize","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","MovieDetailComponent_div_2_Template_button_click_7_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","goBack","MovieDetailComponent_div_2_Template_button_click_9_listener","loadMovie","ɵɵadvance","ɵɵtextInterpolate","error","ɵɵtemplate","MovieDetailComponent_div_3_span_18__svg_svg_1_Template","MovieDetailComponent_div_3_span_18__svg_svg_2_Template","MovieDetailComponent_div_3_span_18__svg_svg_3_Template","ɵɵproperty","star_r4","ɵɵtextInterpolate1","genre_r5","MovieDetailComponent_div_3_footer_51_app_movie_card_4_Template_app_movie_card_cardClick_0_listener","recommendedMovie_r7","_r6","$implicit","onRecommendedMovieClick","id","MovieDetailComponent_div_3_footer_51_app_movie_card_4_Template","recommendedMovies","MovieDetailComponent_div_3_Template_button_click_2_listener","_r3","MovieDetailComponent_div_3_span_18_Template","MovieDetailComponent_div_3_span_40_Template","MovieDetailComponent_div_3_footer_51_Template","movie","title","originalTitle","poster","ɵɵsanitizeUrl","ratingFormatted","getRatingStars","year","durationFormatted","director","genres","castFormatted","description","length","MovieDetailComponent","route","router","location","movieService","isLoading","destroy$","constructor","ngOnInit","ngOnDestroy","next","complete","params","pipe","getMovieById","subscribe","loadRecommendedMovies","message","console","getRecommendedMovies","movies","filter","m","slice","back","movieId","navigate","fullStars","Math","floor","rating","Array","fill","map","_","i","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","Location","i3","MovieService","selectors","decls","vars","consts","template","MovieDetailComponent_Template","rf","ctx","MovieDetailComponent_div_1_Template","MovieDetailComponent_div_2_Template","MovieDetailComponent_div_3_Template"],"sources":["C:\\Users\\kseniya\\dev\\film-catalog\\src\\app\\components\\movie-detail\\movie-detail.component.ts","C:\\Users\\kseniya\\dev\\film-catalog\\src\\app\\components\\movie-detail\\movie-detail.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil, switchMap, finalize } from 'rxjs/operators';\r\nimport { Movie } from '../../models/movie.model';\r\nimport { MovieService } from '../../services/movie.service';\r\n\r\n@Component({\r\n  selector: 'app-movie-detail',\r\n  templateUrl: './movie-detail.component.html',\r\n  styleUrls: ['./movie-detail.component.scss']\r\n})\r\nexport class MovieDetailComponent implements OnInit, OnDestroy {\r\n  movie: Movie | null = null;\r\n  isLoading = true;\r\n  error: string | null = null;\r\n  recommendedMovies: Movie[] = [];\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private location: Location,\r\n    private movieService: MovieService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadMovie();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  loadMovie(): void {\r\n    this.route.params.pipe(\r\n      switchMap(params => {\r\n        const id = +params['id'];\r\n        this.isLoading = true;\r\n        this.error = null;\r\n\r\n        return this.movieService.getMovieById(id).pipe(\r\n          finalize(() => {\r\n            this.isLoading = false;\r\n          })\r\n        );\r\n      }),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe({\r\n      next: (movie) => {\r\n        this.movie = movie;\r\n        this.loadRecommendedMovies();\r\n      },\r\n      error: (error) => {\r\n        this.error = error.message || 'Не удалось загрузить информацию о фильме';\r\n        console.error('Error loading movie:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadRecommendedMovies(): void {\r\n    this.movieService.getRecommendedMovies(4)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (movies) => {\r\n          this.recommendedMovies = movies.filter(m => m.id !== this.movie?.id).slice(0, 3);\r\n        },\r\n        error: (error) => {\r\n          console.error('Error loading recommended movies:', error);\r\n        }\r\n      });\r\n  }\r\n\r\n  goBack(): void {\r\n    this.location.back();\r\n  }\r\n\r\n  onRecommendedMovieClick(movieId: number): void {\r\n    this.router.navigate(['/movie', movieId]);\r\n  }\r\n\r\n  getRatingStars(): number[] {\r\n    if (!this.movie) return [];\r\n    const fullStars = Math.floor(this.movie.rating / 2);\r\n    return Array(5).fill(0).map((_, i) => i < fullStars ? 1 : 0.5);\r\n  }\r\n}\r\n","<div class=\"movie-detail\">\r\n  <!-- Загрузка -->\r\n  <div *ngIf=\"isLoading\" class=\"movie-detail__loading\">\r\n    <div class=\"loading-spinner\"></div>\r\n    <p>Загружаем информацию о фильме...</p>\r\n  </div>\r\n\r\n  <!-- Ошибка -->\r\n  <div *ngIf=\"error && !isLoading\" class=\"movie-detail__error\">\r\n    <div class=\"error-message\">\r\n      <h2>Ошибка</h2>\r\n      <p>{{ error }}</p>\r\n      <div class=\"error-actions\">\r\n        <button\r\n          class=\"back-button\"\r\n          (click)=\"goBack()\"\r\n          aria-label=\"Вернуться назад\"\r\n        >\r\n          Назад\r\n        </button>\r\n        <button\r\n          class=\"retry-button\"\r\n          (click)=\"loadMovie()\"\r\n          aria-label=\"Попробовать снова\"\r\n        >\r\n          Попробовать снова\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Детали фильма -->\r\n  <div *ngIf=\"movie && !isLoading && !error\" class=\"movie-detail__content\">\r\n    <!-- Заголовок и кнопка назад -->\r\n    <header class=\"movie-detail__header\">\r\n      <button\r\n        class=\"back-button\"\r\n        (click)=\"goBack()\"\r\n        aria-label=\"Вернуться назад\"\r\n      >\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\r\n          <path d=\"M19 12H5M12 19l-7-7 7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n        Назад\r\n      </button>\r\n      <h1 class=\"movie-detail__title animate-item\">{{ movie.title }}</h1>\r\n      <p class=\"movie-detail__original-title animate-item\">{{ movie.originalTitle }}</p>\r\n    </header>\r\n\r\n    <!-- Основной контент -->\r\n    <main class=\"movie-detail__main\">\r\n      <!-- Постер и рейтинг -->\r\n      <div class=\"movie-detail__poster-section animate-item\">\r\n        <div class=\"poster-container\">\r\n          <img\r\n            [src]=\"movie.poster\"\r\n            [alt]=\"movie.title\"\r\n            class=\"movie-poster\"\r\n            loading=\"lazy\"\r\n          />\r\n          <div class=\"rating-badge\">\r\n            <span class=\"rating-value\">{{ movie.ratingFormatted }}</span>\r\n            <div class=\"rating-stars\">\r\n              <span *ngFor=\"let star of getRatingStars(); let i = index\" class=\"star\">\r\n                <svg *ngIf=\"star === 1\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\r\n                </svg>\r\n                <svg *ngIf=\"star === 0.5\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77V2z\"/>\r\n                </svg>\r\n                <svg *ngIf=\"star === 0\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"\r\n                        fill-opacity=\"0.3\"/>\r\n                </svg>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Информация о фильме -->\r\n      <div class=\"movie-detail__info-section\">\r\n        <div class=\"info-grid\">\r\n          <div class=\"info-item animate-item\">\r\n            <h3 class=\"info-label\">Год выпуска</h3>\r\n            <p class=\"info-value\">{{ movie.year }}</p>\r\n          </div>\r\n\r\n          <div class=\"info-item animate-item\">\r\n            <h3 class=\"info-label\">Продолжительность</h3>\r\n            <p class=\"info-value\">{{ movie.durationFormatted }}</p>\r\n          </div>\r\n\r\n          <div class=\"info-item animate-item\">\r\n            <h3 class=\"info-label\">Режиссер</h3>\r\n            <p class=\"info-value\">{{ movie.director }}</p>\r\n          </div>\r\n\r\n          <div class=\"info-item animate-item\">\r\n            <h3 class=\"info-label\">Жанры</h3>\r\n            <div class=\"genres-list\">\r\n              <span *ngFor=\"let genre of movie.genres\" class=\"genre-tag\">\r\n                {{ genre }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"info-item full-width animate-item\">\r\n            <h3 class=\"info-label\">В главных ролях</h3>\r\n            <p class=\"info-value\">{{ movie.castFormatted }}</p>\r\n          </div>\r\n\r\n          <div class=\"info-item full-width animate-item\">\r\n            <h3 class=\"info-label\">Описание</h3>\r\n            <p class=\"description\">{{ movie.description }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <!-- Рекомендованные фильмы -->\r\n    <footer *ngIf=\"recommendedMovies.length > 0\" class=\"movie-detail__recommendations animate-item\">\r\n      <h2 class=\"recommendations-title\">Рекомендуем посмотреть</h2>\r\n      <div class=\"recommendations-grid\">\r\n        <app-movie-card\r\n          *ngFor=\"let recommendedMovie of recommendedMovies\"\r\n          [movie]=\"recommendedMovie\"\r\n          [showDetails]=\"false\"\r\n          (cardClick)=\"onRecommendedMovieClick(recommendedMovie.id)\"\r\n          class=\"recommendation-card\"\r\n        ></app-movie-card>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}